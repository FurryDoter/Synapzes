import{c as Pe,g as Ne,h as ye,m as Me,a as Ve}from"./bootstrap-a378dca1.js";import"./index-bad70a97.js";var _e={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pe,function(){class t{constructor(s){s||(s={}),this.main=s.main||"ss-main",this.placeholder=s.placeholder||"ss-placeholder",this.values=s.values||"ss-values",this.single=s.single||"ss-single",this.max=s.max||"ss-max",this.value=s.value||"ss-value",this.valueText=s.valueText||"ss-value-text",this.valueDelete=s.valueDelete||"ss-value-delete",this.valueOut=s.valueOut||"ss-value-out",this.deselect=s.deselect||"ss-deselect",this.deselectPath=s.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=s.arrow||"ss-arrow",this.arrowClose=s.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=s.arrowOpen||"M10,70 L50,30 L90,70",this.content=s.content||"ss-content",this.openAbove=s.openAbove||"ss-open-above",this.openBelow=s.openBelow||"ss-open-below",this.search=s.search||"ss-search",this.searchHighlighter=s.searchHighlighter||"ss-search-highlight",this.searching=s.searching||"ss-searching",this.addable=s.addable||"ss-addable",this.addablePath=s.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=s.list||"ss-list",this.optgroup=s.optgroup||"ss-optgroup",this.optgroupLabel=s.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=s.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=s.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=s.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=s.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=s.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=s.optgroupClosable||"ss-closable",this.option=s.option||"ss-option",this.optionDelete=s.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=s.highlighted||"ss-highlighted",this.open=s.open||"ss-open",this.close=s.close||"ss-close",this.selected=s.selected||"ss-selected",this.error=s.error||"ss-error",this.disabled=s.disabled||"ss-disabled",this.hide=s.hide||"ss-hide"}}function i(){return Math.random().toString(36).substring(2,10)}function r(C,s){function l(d,f){return f&&d&&d.classList&&d.classList.contains(f)||f&&d&&d.dataset&&d.dataset.id&&d.dataset.id===s?d:null}function a(d,f){return!d||d===document?null:l(d,f)?d:a(d.parentNode,f)}return l(C,s)||a(C,s)}function c(C,s=50,l=!1){let a;return function(...d){const f=self,w=()=>{a=null,l||C.apply(f,d)},g=l&&!a;clearTimeout(a),a=setTimeout(w,s),g&&C.apply(f,d)}}function o(C,s){return JSON.stringify(C)===JSON.stringify(s)}function h(C){const s=C.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,l=>"-"+l.toLowerCase());return C[0]===C[0].toUpperCase()?s.substring(1):s}class p{constructor(s){if(this.id=!s.id||s.id===""?i():s.id,this.label=s.label||"",this.selectAll=s.selectAll===void 0?!1:s.selectAll,this.selectAllText=s.selectAllText||"Select All",this.closable=s.closable||"off",this.options=[],s.options)for(const l of s.options)this.options.push(new u(l))}}class u{constructor(s){this.id=!s.id||s.id===""?i():s.id,this.value=s.value===void 0?s.text:s.value,this.text=s.text||"",this.html=s.html||"",this.selected=s.selected!==void 0?s.selected:!1,this.display=s.display!==void 0?s.display:!0,this.disabled=s.disabled!==void 0?s.disabled:!1,this.mandatory=s.mandatory!==void 0?s.mandatory:!1,this.placeholder=s.placeholder!==void 0?s.placeholder:!1,this.class=s.class||"",this.style=s.style||"",this.data=s.data||{}}}class O{constructor(s,l){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=s,this.setData(l)}validateDataArray(s){if(!Array.isArray(s))return new Error("Data must be an array");for(let l of s)if(l instanceof p||"label"in l){if(!("label"in l))return new Error("Optgroup must have a label");if("options"in l&&l.options)for(let a of l.options){const d=this.validateOption(a);if(d)return d}}else if(l instanceof u||"text"in l){const a=this.validateOption(l);if(a)return a}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(s){return"text"in s?null:new Error("Option must have a text")}partialToFullData(s){let l=[];return s.forEach(a=>{if(a instanceof p||"label"in a){let d=[];"options"in a&&a.options&&a.options.forEach(f=>{d.push(new u(f))}),d.length>0&&l.push(new p(a))}(a instanceof u||"text"in a)&&l.push(new u(a))}),l}setData(s){this.data=this.partialToFullData(s),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(s,l=!1){if(l){let a=[new u(s)];this.setData(a.concat(this.getData()))}else this.setData(this.getData().concat(new u(s)))}setSelectedBy(s,l){let a=null,d=!1;const f=[];for(let g of this.data){if(g instanceof p)for(let m of g.options)a||(a=m),m.selected=d?!1:l.includes(m[s]),m.selected&&(f.push(m),this.selectType==="single"&&(d=!0));g instanceof u&&(a||(a=g),g.selected=d?!1:l.includes(g[s]),g.selected&&(f.push(g),this.selectType==="single"&&(d=!0)))}this.selectType==="single"&&a&&!d&&(a.selected=!0,f.push(a));const w=l.map(g=>{var m;return((m=f.find(y=>y[s]===g))===null||m===void 0?void 0:m.id)||""});this.selectedOrder=w}getSelected(){return this.getSelectedOptions().map(s=>s.id)}getSelectedValues(){return this.getSelectedOptions().map(s=>s.value)}getSelectedOptions(){return this.filter(s=>s.selected,!1)}getOptgroupByID(s){for(let l of this.data)if(l instanceof p&&l.id===s)return l;return null}getOptionByID(s){let l=this.filter(a=>a.id===s,!1);return l.length?l[0]:null}getSelectType(){return this.selectType}getFirstOption(){let s=null;for(let l of this.data)if(l instanceof p?s=l.options[0]:l instanceof u&&(s=l),s)break;return s}search(s,l){return s=s.trim(),s===""?this.getData():this.filter(a=>l(a,s),!0)}filter(s,l){const a=[];return this.data.forEach(d=>{if(d instanceof p){let f=[];if(d.options.forEach(w=>{(!s||s(w))&&(l?f.push(new u(w)):a.push(new u(w)))}),f.length>0){let w=new p(d);w.options=f,a.push(w)}}d instanceof u&&(!s||s(d))&&a.push(new u(d))}),a}selectedOrderOptions(s){const l=[];return this.selectedOrder.forEach(a=>{const d=s.find(f=>f.id===a);d&&l.push(d)}),s.forEach(a=>{let d=!1;l.forEach(f=>{if(a.id===f.id){d=!0;return}}),d||l.push(a)}),l}}class v{constructor(s,l,a,d){this.store=a,this.settings=s,this.classes=l,this.callbacks=d,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const s=this.store.getSelectedOptions();if(s.length){const l=s[s.length-1].id,a=this.content.list.querySelector('[data-id="'+l+'"]');a&&this.ensureElementInView(this.content.list,a)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const s of this.settings.class)s.trim()!==""&&(this.main.main.classList.add(s.trim()),this.content.main.classList.add(s.trim()));this.settings.contentPosition==="relative"&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var s;const l=document.createElement("div");l.dataset.id=this.settings.id,l.setAttribute("aria-label",this.settings.ariaLabel),l.tabIndex=0,l.onkeydown=b=>{switch(b.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),b.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const x=this.content.list.querySelector("."+this.classes.highlighted);return x&&x.click(),!1;case"Escape":return this.callbacks.close(),!1}return!0},l.onclick=b=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const a=document.createElement("div");a.classList.add(this.classes.values),l.appendChild(a);const d=document.createElement("div");d.classList.add(this.classes.deselect);const f=(s=this.store)===null||s===void 0?void 0:s.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&f&&f.length<=0?d.classList.add(this.classes.hide):d.classList.remove(this.classes.hide),d.onclick=b=>{if(b.stopPropagation(),this.settings.disabled)return;let x=!0;const L=this.store.getSelectedOptions(),D=[];if(this.callbacks.beforeChange&&(x=this.callbacks.beforeChange(D,L)===!0),x){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const V=this.store.getFirstOption(),R=V?V.id:"";this.callbacks.setSelected(R,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("viewBox","0 0 100 100");const g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("d",this.classes.deselectPath),w.appendChild(g),d.appendChild(w),l.appendChild(d);const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.classList.add(this.classes.arrow),m.setAttribute("viewBox","0 0 100 100");const y=document.createElementNS("http://www.w3.org/2000/svg","path");return y.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&m.classList.add(this.classes.hide),m.appendChild(y),l.appendChild(m),{main:l,values:a,deselect:{main:d,svg:w,path:g},arrow:{main:m,path:y}}}mainFocus(s){s!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const s=this.store.filter(d=>d.placeholder,!1);let l=this.settings.placeholderText;s.length&&(s[0].html!==""?l=s[0].html:s[0].text!==""&&(l=s[0].text));const a=document.createElement("div");return a.classList.add(this.classes.placeholder),a.innerHTML=l,a}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const s=this.store.filter(a=>a.selected&&!a.placeholder,!1),l=s.length>0?s[0]:null;if(!l)this.main.values.innerHTML=this.placeholder().outerHTML;else{const a=document.createElement("div");a.classList.add(this.classes.single),l.html?a.innerHTML=l.html:a.innerText=l.text,this.main.values.innerHTML=a.outerHTML}!this.settings.allowDeselect||!s.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let s=this.main.values.childNodes,l=this.store.filter(d=>d.selected&&d.display,!1);if(l.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const d=this.main.values.querySelector("."+this.classes.placeholder);d&&d.remove()}if(l.length>this.settings.maxValuesShown){const d=document.createElement("div");d.classList.add(this.classes.max),d.textContent=this.settings.maxValuesMessage.replace("{number}",l.length.toString()),this.main.values.innerHTML=d.outerHTML;return}else{const d=this.main.values.querySelector("."+this.classes.max);d&&d.remove()}this.settings.keepOrder&&(l=this.store.selectedOrderOptions(l));let a=[];for(let d=0;d<s.length;d++){const f=s[d],w=f.getAttribute("data-id");w&&(l.filter(m=>m.id===w,!1).length||a.push(f))}for(const d of a)d.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(d)&&this.main.values.removeChild(d)},100);s=this.main.values.childNodes;for(let d=0;d<l.length;d++){let f=!0;for(let w=0;w<s.length;w++)l[d].id===String(s[w].dataset.id)&&(f=!1);f&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(l[d])):s.length===0?this.main.values.appendChild(this.multipleValue(l[d])):d===0?this.main.values.insertBefore(this.multipleValue(l[d]),s[d]):s[d-1].insertAdjacentElement("afterend",this.multipleValue(l[d])))}}multipleValue(s){const l=document.createElement("div");l.classList.add(this.classes.value),l.dataset.id=s.id;const a=document.createElement("div");if(a.classList.add(this.classes.valueText),a.textContent=s.text,l.appendChild(a),!s.mandatory){const d=document.createElement("div");d.classList.add(this.classes.valueDelete),d.onclick=g=>{if(g.preventDefault(),g.stopPropagation(),this.settings.disabled)return;let m=!0;const y=this.store.getSelectedOptions(),b=y.filter(x=>x.selected&&x.id!==s.id,!0);if(!(this.settings.minSelected&&b.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(m=this.callbacks.beforeChange(b,y)===!0),m)){let x=[];for(const L of b){if(L instanceof p)for(const D of L.options)x.push(D.id);L instanceof u&&x.push(L.id)}this.callbacks.setSelected(x,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(b),this.updateDeselectAll()}};const f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",this.classes.optionDelete),f.appendChild(w),d.appendChild(f),l.appendChild(d)}return l}contentDiv(){const s=document.createElement("div");s.dataset.id=this.settings.id;const l=this.searchDiv();s.appendChild(l.main);const a=this.listDiv();return s.appendChild(a),{main:s,search:l,list:a}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const s=document.createElement("div"),l=document.createElement("input"),a=document.createElement("div");s.classList.add(this.classes.search);const d={main:s,input:l};if(this.settings.showSearch||(s.classList.add(this.classes.hide),l.readOnly=!0),l.type="search",l.placeholder=this.settings.searchPlaceholder,l.tabIndex=-1,l.setAttribute("aria-label",this.settings.searchPlaceholder),l.setAttribute("autocapitalize","off"),l.setAttribute("autocomplete","off"),l.setAttribute("autocorrect","off"),l.oninput=c(f=>{this.callbacks.search(f.target.value)},100),l.onkeydown=f=>{switch(f.key){case"ArrowUp":case"ArrowDown":return f.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const w=this.content.list.querySelector("."+this.classes.highlighted);return w?(w.click(),!1):!0;case"Enter":if(this.callbacks.addable)return a.click(),!1;{const g=this.content.list.querySelector("."+this.classes.highlighted);if(g)return g.click(),!1}return!0}return!0},s.appendChild(l),this.callbacks.addable){a.classList.add(this.classes.addable);const f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",this.classes.addablePath),f.appendChild(w),a.appendChild(f),a.onclick=g=>{if(g.preventDefault(),g.stopPropagation(),!this.callbacks.addable)return;const m=this.content.search.input.value.trim();if(m===""){this.content.search.input.focus();return}const y=x=>{let L=new u(x);if(this.callbacks.addOption(L),this.settings.isMultiple){let D=this.store.getSelected();D.push(L.id),this.callbacks.setSelected(D,!0)}else this.callbacks.setSelected([L.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},b=this.callbacks.addable(m);b===!1||b===void 0||b===null||(b instanceof Promise?b.then(x=>{typeof x=="string"?y({text:x,value:x}):b instanceof Error?this.renderError(b.message):y(x)}):typeof b=="string"?y({text:b,value:b}):b instanceof Error?this.renderError(b.message):y(b))},s.appendChild(a),d.addable={main:a,svg:f,path:w}}return d}searchFocus(){this.content.search.input.focus()}getOptions(s=!1,l=!1,a=!1){let d="."+this.classes.option;return s&&(d+=":not(."+this.classes.placeholder+")"),l&&(d+=":not(."+this.classes.disabled+")"),a&&(d+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(d))}highlight(s){const l=this.getOptions(!0,!0,!0);if(l.length===0)return;if(l.length===1&&!l[0].classList.contains(this.classes.highlighted)){l[0].classList.add(this.classes.highlighted);return}let a=!1;for(const d of l)d.classList.contains(this.classes.highlighted)&&(a=!0);if(!a){for(const d of l)if(d.classList.contains(this.classes.selected)){d.classList.add(this.classes.highlighted);break}}for(let d=0;d<l.length;d++)if(l[d].classList.contains(this.classes.highlighted)){const f=l[d];f.classList.remove(this.classes.highlighted);const w=f.parentElement;if(w&&w.classList.contains(this.classes.open)){const y=w.querySelector("."+this.classes.optgroupLabel);y&&y.click()}let g=l[s==="down"?d+1<l.length?d+1:0:d-1>=0?d-1:l.length-1];g.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,g);const m=g.parentElement;if(m&&m.classList.contains(this.classes.close)){const y=m.querySelector("."+this.classes.optgroupLabel);y&&y.click()}return}l[s==="down"?0:l.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,l[s==="down"?0:l.length-1])}listDiv(){const s=document.createElement("div");return s.classList.add(this.classes.list),s}renderError(s){this.content.list.innerHTML="";const l=document.createElement("div");l.classList.add(this.classes.error),l.textContent=s,this.content.list.appendChild(l)}renderSearching(){this.content.list.innerHTML="";const s=document.createElement("div");s.classList.add(this.classes.searching),s.textContent=this.settings.searchingText,this.content.list.appendChild(s)}renderOptions(s){if(this.content.list.innerHTML="",s.length===0){const l=document.createElement("div");l.classList.add(this.classes.search),this.callbacks.addable?l.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):l.innerHTML=this.settings.searchText,this.content.list.appendChild(l);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(a=>a.placeholder,!1).length||this.store.addOption(new u({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const l of s){if(l instanceof p){const a=document.createElement("div");a.classList.add(this.classes.optgroup);const d=document.createElement("div");d.classList.add(this.classes.optgroupLabel),a.appendChild(d);const f=document.createElement("div");f.classList.add(this.classes.optgroupLabelText),f.textContent=l.label,d.appendChild(f);const w=document.createElement("div");if(w.classList.add(this.classes.optgroupActions),d.appendChild(w),this.settings.isMultiple&&l.selectAll){const g=document.createElement("div");g.classList.add(this.classes.optgroupSelectAll);let m=!0;for(const D of l.options)if(!D.selected){m=!1;break}m&&g.classList.add(this.classes.selected);const y=document.createElement("span");y.textContent=l.selectAllText,g.appendChild(y);const b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("viewBox","0 0 100 100"),g.appendChild(b);const x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d",this.classes.optgroupSelectAllBox),b.appendChild(x);const L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("d",this.classes.optgroupSelectAllCheck),b.appendChild(L),g.addEventListener("click",D=>{D.preventDefault(),D.stopPropagation();const V=this.store.getSelected();if(m){const R=V.filter(H=>{for(const Fe of l.options)if(H===Fe.id)return!1;return!0});this.callbacks.setSelected(R,!0);return}else{const R=V.concat(l.options.map(H=>H.id));for(const H of l.options)this.store.getOptionByID(H.id)||this.callbacks.addOption(H);this.callbacks.setSelected(R,!0);return}}),w.appendChild(g)}if(l.closable!=="off"){const g=document.createElement("div");g.classList.add(this.classes.optgroupClosable);const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100"),m.classList.add(this.classes.arrow),g.appendChild(m);const y=document.createElementNS("http://www.w3.org/2000/svg","path");m.appendChild(y),l.options.some(b=>b.selected)||this.content.search.input.value.trim()!==""?(g.classList.add(this.classes.open),y.setAttribute("d",this.classes.arrowOpen)):l.closable==="open"?(a.classList.add(this.classes.open),y.setAttribute("d",this.classes.arrowOpen)):l.closable==="close"&&(a.classList.add(this.classes.close),y.setAttribute("d",this.classes.arrowClose)),d.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),a.classList.contains(this.classes.close)?(a.classList.remove(this.classes.close),a.classList.add(this.classes.open),y.setAttribute("d",this.classes.arrowOpen)):(a.classList.remove(this.classes.open),a.classList.add(this.classes.close),y.setAttribute("d",this.classes.arrowClose))}),w.appendChild(g)}a.appendChild(d);for(const g of l.options)a.appendChild(this.option(g));this.content.list.appendChild(a)}l instanceof u&&this.content.list.appendChild(this.option(l))}}option(s){if(s.placeholder){const a=document.createElement("div");return a.classList.add(this.classes.option),a.classList.add(this.classes.hide),a}const l=document.createElement("div");return l.dataset.id=s.id,l.id=s.id,l.classList.add(this.classes.option),l.setAttribute("role","option"),s.class&&s.class.split(" ").forEach(a=>{l.classList.add(a)}),s.style&&(l.style.cssText=s.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?l.innerHTML=this.highlightText(s.html!==""?s.html:s.text,this.content.search.input.value,this.classes.searchHighlighter):s.html!==""?l.innerHTML=s.html:l.textContent=s.text,this.settings.showOptionTooltips&&l.textContent&&l.setAttribute("title",l.textContent),s.display||l.classList.add(this.classes.hide),s.disabled&&l.classList.add(this.classes.disabled),s.selected&&this.settings.hideSelected&&l.classList.add(this.classes.hide),s.selected?(l.classList.add(this.classes.selected),l.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",l.id)):(l.classList.remove(this.classes.selected),l.setAttribute("aria-selected","false")),l.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();const d=this.store.getSelected(),f=a.currentTarget,w=String(f.dataset.id);if(s.disabled||s.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=d.length&&!s.selected||this.settings.isMultiple&&this.settings.minSelected>=d.length&&s.selected)return;let g=!1;const m=this.store.getSelectedOptions();let y=[];this.settings.isMultiple&&(s.selected?y=m.filter(b=>b.id!==w):y=m.concat(s)),this.settings.isMultiple||(s.selected?y=[]:y=[s]),this.callbacks.beforeChange||(g=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(y,m)===!1?g=!1:g=!0),g&&(this.store.getOptionByID(w)||this.callbacks.addOption(s),this.callbacks.setSelected(y.map(b=>b.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(y))}),l}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(s,l,a){let d=s;const f=new RegExp("(?![^<]*>)("+l.trim()+")(?![^<]*>[^<>]*</)","i");if(!s.match(f))return s;const w=s.match(f).index,g=w+s.match(f)[0].toString().length,m=s.substring(w,g);return d=d.replace(f,`<mark class="${a}">${m}</mark>`),d}moveContentAbove(){const s=this.main.main.offsetHeight,l=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const a=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(s+l-1)+"px 0px 0px 0px",this.content.main.style.top=a.top+a.height+window.scrollY+"px",this.content.main.style.left=a.left+window.scrollX+"px",this.content.main.style.width=a.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const s=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=s.top+s.height+window.scrollY+"px",this.content.main.style.left=s.left+window.scrollX+"px",this.content.main.style.width=s.width+"px")}ensureElementInView(s,l){const a=s.scrollTop+s.offsetTop,d=a+s.clientHeight,f=l.offsetTop,w=f+l.clientHeight;f<a?s.scrollTop-=a-f:w>d&&(s.scrollTop+=w-d)}putContent(){const s=this.main.main.offsetHeight,l=this.main.main.getBoundingClientRect(),a=this.content.main.offsetHeight;return window.innerHeight-(l.top+s)<=a&&l.top>a?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const s=this.store.getSelectedOptions(),l=s&&s.length>0,a=this.settings.isMultiple,d=this.settings.allowDeselect,f=this.main.deselect.main,w=this.classes.hide;d&&!(a&&!l)?f.classList.remove(w):f.classList.add(w)}}class S{constructor(s){this.listen=!1,this.observer=null,this.select=s,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(s){this.listen=s,s&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),s||this.observer&&this.observer.disconnect()}valueChange(s){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(s){if(!this.listen)return;let l=!1,a=!1,d=!1;for(const f of s){if(f.target===this.select&&(f.attributeName==="disabled"&&(a=!0),f.attributeName==="class"&&(l=!0),f.type==="childList")){for(const w of f.addedNodes)if(w.nodeName==="OPTION"&&w.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}d=!0}(f.target.nodeName==="OPTGROUP"||f.target.nodeName==="OPTION")&&(d=!0)}l&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),a&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),d&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let s=[];const l=this.select.childNodes;for(const a of l)a.nodeName==="OPTGROUP"&&s.push(this.getDataFromOptgroup(a)),a.nodeName==="OPTION"&&s.push(this.getDataFromOption(a));return s}getDataFromOptgroup(s){let l={id:s.id,label:s.label,selectAll:s.dataset?s.dataset.selectall==="true":!1,selectAllText:s.dataset?s.dataset.selectalltext:"Select all",closable:s.dataset?s.dataset.closable:"off",options:[]};const a=s.childNodes;for(const d of a)d.nodeName==="OPTION"&&l.options.push(this.getDataFromOption(d));return l}getDataFromOption(s){return{id:s.id,value:s.value,text:s.text,html:s.dataset&&s.dataset.html?s.dataset.html:"",selected:s.selected,display:s.style.display!=="none",disabled:s.disabled,mandatory:s.dataset?s.dataset.mandatory==="true":!1,placeholder:s.dataset.placeholder==="true",class:s.className,style:s.style.cssText,data:s.dataset}}getSelectedOptions(){let s=[];const l=this.select.childNodes;for(const a of l){if(a.nodeName==="OPTGROUP"){const d=a.childNodes;for(const f of d)if(f.nodeName==="OPTION"){const w=f;w.selected&&s.push(this.getDataFromOption(w))}}if(a.nodeName==="OPTION"){const d=a;d.selected&&s.push(this.getDataFromOption(d))}}return s}getSelectedValues(){return this.getSelectedOptions().map(s=>s.value)}setSelected(s){this.changeListen(!1);const l=this.select.childNodes;for(const a of l){if(a.nodeName==="OPTGROUP"){const f=a.childNodes;for(const w of f)if(w.nodeName==="OPTION"){const g=w;g.selected=s.includes(g.id)}}if(a.nodeName==="OPTION"){const d=a;d.selected=s.includes(d.id)}}this.changeListen(!0)}setSelectedByValue(s){this.changeListen(!1);const l=this.select.childNodes;for(const a of l){if(a.nodeName==="OPTGROUP"){const f=a.childNodes;for(const w of f)if(w.nodeName==="OPTION"){const g=w;g.selected=s.includes(g.value)}}if(a.nodeName==="OPTION"){const d=a;d.selected=s.includes(d.value)}}this.changeListen(!0)}updateSelect(s,l,a){this.changeListen(!1),s&&(this.select.dataset.id=s),l&&(this.select.style.cssText=l),a&&(this.select.className="",a.forEach(d=>{d.trim()!==""&&this.select.classList.add(d.trim())})),this.changeListen(!0)}updateOptions(s){this.changeListen(!1),this.select.innerHTML="";for(const l of s)l instanceof p&&this.select.appendChild(this.createOptgroup(l)),l instanceof u&&this.select.appendChild(this.createOption(l));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(s){const l=document.createElement("optgroup");if(l.id=s.id,l.label=s.label,s.selectAll&&(l.dataset.selectAll="true"),s.closable!=="off"&&(l.dataset.closable=s.closable),s.options)for(const a of s.options)l.appendChild(this.createOption(a));return l}createOption(s){const l=document.createElement("option");return l.id=s.id,l.value=s.value,l.textContent=s.text,s.html!==""&&l.setAttribute("data-html",s.html),s.selected&&(l.selected=s.selected),s.disabled&&(l.disabled=!0),s.display||(l.style.display="none"),s.placeholder&&l.setAttribute("data-placeholder","true"),s.mandatory&&l.setAttribute("data-mandatory","true"),s.class&&s.class.split(" ").forEach(a=>{l.classList.add(a)}),s.data&&typeof s.data=="object"&&Object.keys(s.data).forEach(a=>{l.setAttribute("data-"+h(a),s.data[a])}),l}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class A{constructor(s){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,s||(s={}),this.id="ss-"+i(),this.style=s.style||"",this.class=s.class||[],this.disabled=s.disabled!==void 0?s.disabled:!1,this.alwaysOpen=s.alwaysOpen!==void 0?s.alwaysOpen:!1,this.showSearch=s.showSearch!==void 0?s.showSearch:!0,this.focusSearch=s.focusSearch!==void 0?s.focusSearch:!0,this.ariaLabel=s.ariaLabel||"Combobox",this.searchPlaceholder=s.searchPlaceholder||"Search",this.searchText=s.searchText||"No Results",this.searchingText=s.searchingText||"Searching...",this.searchHighlight=s.searchHighlight!==void 0?s.searchHighlight:!1,this.closeOnSelect=s.closeOnSelect!==void 0?s.closeOnSelect:!0,this.contentLocation=s.contentLocation||document.body,this.contentPosition=s.contentPosition||"absolute",this.openPosition=s.openPosition||"auto",this.placeholderText=s.placeholderText!==void 0?s.placeholderText:"Select Value",this.allowDeselect=s.allowDeselect!==void 0?s.allowDeselect:!1,this.hideSelected=s.hideSelected!==void 0?s.hideSelected:!1,this.keepOrder=s.keepOrder!==void 0?s.keepOrder:!1,this.showOptionTooltips=s.showOptionTooltips!==void 0?s.showOptionTooltips:!1,this.minSelected=s.minSelected||0,this.maxSelected=s.maxSelected||1e3,this.timeoutDelay=s.timeoutDelay||200,this.maxValuesShown=s.maxValuesShown||20,this.maxValuesMessage=s.maxValuesMessage||"{number} selected",this.addableText=s.addableText||'Press "Enter" to add {value}'}}class _{constructor(s){var l;if(this.events={search:void 0,searchFilter:(g,m)=>g.text.toLowerCase().indexOf(m.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=c(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=c(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=g=>{this.settings.isOpen&&g.target&&!r(g.target,this.settings.id)&&this.close(g.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof s.select=="string"?document.querySelector(s.select):s.select,!this.selectEl){s.events&&s.events.error&&s.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){s.events&&s.events.error&&s.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new A(s.settings),this.cssClasses=new t(s.cssClasses);const a=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const g in s.events)s.events.hasOwnProperty(g)&&(a.indexOf(g)!==-1?this.events[g]=c(s.events[g],100):this.events[g]=s.events[g]);this.settings.disabled=!((l=s.settings)===null||l===void 0)&&l.disabled?s.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new S(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=g=>{this.setSelected(g.map(m=>m.id))},this.select.onClassChange=g=>{this.settings.class=g,this.render.updateClassStyles()},this.select.onDisabledChange=g=>{g?this.disable():this.enable()},this.select.onOptionsChange=g=>{this.setData(g)},this.store=new O(this.settings.isMultiple?"multiple":"single",s.data?s.data:this.select.getData()),s.data&&this.select.updateOptions(this.store.getData());const d={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new v(this.settings,this.cssClasses,this.store,d),this.render.renderValues(),this.render.renderOptions(this.store.getData());const f=this.selectEl.getAttribute("aria-label"),w=this.selectEl.getAttribute("aria-labelledby");f?this.render.main.main.setAttribute("aria-label",f):w&&this.render.main.main.setAttribute("aria-labelledby",w),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(s){const l=this.store.getSelected(),a=this.store.validateDataArray(s);if(a){this.events.error&&this.events.error(a);return}this.store.setData(s);const d=this.store.getData();this.select.updateOptions(d),this.render.renderValues(),this.render.renderOptions(d),this.events.afterChange&&!o(l,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let s=this.store.getSelectedOptions();return this.settings.keepOrder&&(s=this.store.selectedOrderOptions(s)),s.map(l=>l.value)}setSelected(s,l=!0){const a=this.store.getSelected(),d=this.store.getDataOptions();s=Array.isArray(s)?s:[s];const f=[];for(const g of s){if(d.find(m=>m.id==g)){f.push(g);continue}for(const m of d.filter(y=>y.value==g))f.push(m.id)}this.store.setSelectedBy("id",f);const w=this.store.getData();this.select.updateOptions(w),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(w),l&&this.events.afterChange&&!o(a,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(s){const l=this.store.getSelected();this.store.getDataOptions().some(d=>{var f;return d.value===((f=s.value)!==null&&f!==void 0?f:s.text)})||this.store.addOption(s);const a=this.store.getData();this.select.updateOptions(a),this.render.renderValues(),this.render.renderOptions(a),this.events.afterChange&&!o(l,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(s=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(s),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(s){if(this.render.content.search.input.value!==s&&(this.render.content.search.input.value=s),!this.events.search){this.render.renderOptions(s===""?this.store.getData():this.store.search(s,this.events.searchFilter));return}this.render.renderSearching();const l=this.events.search(s,this.store.getSelectedOptions());if(l instanceof Promise){l.then(a=>{this.render.renderOptions(this.store.partialToFullData(a))}).catch(a=>{this.render.renderError(typeof a=="string"?a:a.message)});return}else Array.isArray(l)?this.render.renderOptions(this.store.partialToFullData(l)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return _})})(_e);var Be=_e.exports;const He=Ne(Be);function te(n,e){n.split(/\s+/).forEach(t=>{e(t)})}class Re{constructor(){this._events=void 0,this._events={}}on(e,t){te(e,i=>{const r=this._events[i]||[];r.push(t),this._events[i]=r})}off(e,t){var i=arguments.length;if(i===0){this._events={};return}te(e,r=>{if(i===1){delete this._events[r];return}const c=this._events[r];c!==void 0&&(c.splice(c.indexOf(t),1),this._events[r]=c)})}trigger(e,...t){var i=this;te(e,r=>{const c=i._events[r];c!==void 0&&c.forEach(o=>{o.apply(i,t)})})}}function $e(n){return n.plugins={},class extends n{constructor(...e){super(...e),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,t){n.plugins[e]={name:e,fn:t}}initializePlugins(e){var t,i;const r=this,c=[];if(Array.isArray(e))e.forEach(o=>{typeof o=="string"?c.push(o):(r.plugins.settings[o.name]=o.options,c.push(o.name))});else if(e)for(t in e)e.hasOwnProperty(t)&&(r.plugins.settings[t]=e[t],c.push(t));for(;i=c.shift();)r.require(i)}loadPlugin(e){var t=this,i=t.plugins,r=n.plugins[e];if(!n.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=r.fn.apply(t,[t.plugins.settings[e]||{}]),i.names.push(e)}require(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]}}}/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */const ee=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":je(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Se=n=>{if(!qe(n))return n.join("");let e="",t=0;const i=()=>{t>1&&(e+="{"+t+"}")};return n.forEach((r,c)=>{if(r===n[c-1]){t++;return}i(),e+=r,t=1}),i(),e},Ce=n=>{let e=ce(n);return ee(e)},qe=n=>new Set(n).size!==n.length,z=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),je=n=>n.reduce((e,t)=>Math.max(e,ze(t)),0),ze=n=>ce(n).length,ce=n=>Array.from(n);/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */const Le=n=>{if(n.length===1)return[[n]];let e=[];const t=n.substring(1);return Le(t).forEach(function(r){let c=r.slice(0);c[0]=n.charAt(0)+c[0],e.push(c),c=r.slice(0),c.unshift(n.charAt(0)),e.push(c)}),e};/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */const Ke=[[0,65535]],Ue="[̀-ͯ·ʾʼ]";let J,xe;const Ge=3,de={},he={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in he){let e=he[n]||"";for(let t=0;t<e.length;t++){let i=e.substring(t,t+1);de[i]=n}}const Ye=new RegExp(Object.keys(de).join("|")+"|"+Ue,"gu"),Qe=n=>{J===void 0&&(J=Ze(n||Ke))},ue=(n,e="NFKD")=>n.normalize(e),W=n=>ce(n).reduce((e,t)=>e+Je(t),""),Je=n=>(n=ue(n).toLowerCase().replace(Ye,e=>de[e]||""),ue(n,"NFC"));function*We(n){for(const[e,t]of n)for(let i=e;i<=t;i++){let r=String.fromCharCode(i),c=W(r);c!=r.toLowerCase()&&(c.length>Ge||c.length!=0&&(yield{folded:c,composed:r,code_point:i}))}}const Xe=n=>{const e={},t=(i,r)=>{const c=e[i]||new Set,o=new RegExp("^"+Ce(c)+"$","iu");r.match(o)||(c.add(z(r)),e[i]=c)};for(let i of We(n))t(i.folded,i.folded),t(i.folded,i.composed);return e},Ze=n=>{const e=Xe(n),t={};let i=[];for(let c in e){let o=e[c];o&&(t[c]=Ce(o)),c.length>1&&i.push(z(c))}i.sort((c,o)=>o.length-c.length);const r=ee(i);return xe=new RegExp("^"+r,"u"),t},et=(n,e=1)=>{let t=0;return n=n.map(i=>(J[i]&&(t+=i.length),J[i]||i)),t>=e?Se(n):""},tt=(n,e=1)=>(e=Math.max(e,n.length-1),ee(Le(n).map(t=>et(t,e)))),pe=(n,e=!0)=>{let t=n.length>1?1:0;return ee(n.map(i=>{let r=[];const c=e?i.length():i.length()-1;for(let o=0;o<c;o++)r.push(tt(i.substrs[o]||"",t));return Se(r)}))},st=(n,e)=>{for(const t of e){if(t.start!=n.start||t.end!=n.end||t.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=o=>{for(const h of i){if(h.start===o.start&&h.substr===o.substr)return!1;if(!(o.length==1||h.length==1)&&(o.start<h.start&&o.end>h.start||h.start<o.start&&h.end>o.start))return!0}return!1};if(!(t.parts.filter(r).length>0))return!0}return!1};class X{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,t){let i=new X,r=JSON.parse(JSON.stringify(this.parts)),c=r.pop();for(const p of r)i.add(p);let o=t.substr.substring(0,e-c.start),h=o.length;return i.add({start:c.start,end:c.start+h,length:h,substr:o}),i}}const it=n=>{Qe(),n=W(n);let e="",t=[new X];for(let i=0;i<n.length;i++){let c=n.substring(i).match(xe);const o=n.substring(i,i+1),h=c?c[0]:null;let p=[],u=new Set;for(const O of t){const v=O.last();if(!v||v.length==1||v.end<=i)if(h){const S=h.length;O.add({start:i,end:i+S,length:S,substr:h}),u.add("1")}else O.add({start:i,end:i+1,length:1,substr:o}),u.add("2");else if(h){let S=O.clone(i,v);const A=h.length;S.add({start:i,end:i+A,length:A,substr:h}),p.push(S)}else u.add("3")}if(p.length>0){p=p.sort((O,v)=>O.length()-v.length());for(let O of p)st(O,t)||t.push(O);continue}if(i>0&&u.size==1&&!u.has("3")){e+=pe(t,!1);let O=new X;const v=t[0];v&&O.add(v.last()),t=[O]}}return e+=pe(t,!0),e};/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */const nt=(n,e)=>{if(n)return n[e]},rt=(n,e)=>{if(n){for(var t,i=e.split(".");(t=i.shift())&&(n=n[t]););return n}},se=(n,e,t)=>{var i,r;return!n||(n=n+"",e.regex==null)||(r=n.search(e.regex),r===-1)?0:(i=e.string.length/n.length,r===0&&(i+=.5),i*t)},ie=(n,e)=>{var t=n[e];if(typeof t=="function")return t;t&&!Array.isArray(t)&&(n[e]=[t])},P=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},lt=(n,e)=>typeof n=="number"&&typeof e=="number"?n>e?1:n<e?-1:0:(n=W(n+"").toLowerCase(),e=W(e+"").toLowerCase(),n>e?1:e>n?-1:0);/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */class ot{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,i){if(!e||!e.length)return[];const r=[],c=e.split(/\s+/);var o;return i&&(o=new RegExp("^("+Object.keys(i).map(z).join("|")+"):(.*)$")),c.forEach(h=>{let p,u=null,O=null;o&&(p=h.match(o))&&(u=p[1],h=p[2]),h.length>0&&(this.settings.diacritics?O=it(h)||null:O=z(h),O&&t&&(O="\\b"+O)),r.push({string:h,regex:O?new RegExp(O,"iu"):null,field:u})}),r}getScoreFunction(e,t){var i=this.prepareSearch(e,t);return this._getScoreFunction(i)}_getScoreFunction(e){const t=e.tokens,i=t.length;if(!i)return function(){return 0};const r=e.options.fields,c=e.weights,o=r.length,h=e.getAttrFn;if(!o)return function(){return 1};const p=function(){return o===1?function(u,O){const v=r[0].field;return se(h(O,v),u,c[v]||1)}:function(u,O){var v=0;if(u.field){const S=h(O,u.field);!u.regex&&S?v+=1/o:v+=se(S,u,1)}else P(c,(S,A)=>{v+=se(h(O,A),u,S)});return v/o}}();return i===1?function(u){return p(t[0],u)}:e.options.conjunction==="and"?function(u){var O,v=0;for(let S of t){if(O=p(S,u),O<=0)return 0;v+=O}return v/i}:function(u){var O=0;return P(t,v=>{O+=p(v,u)}),O/i}}getSortFunction(e,t){var i=this.prepareSearch(e,t);return this._getSortFunction(i)}_getSortFunction(e){var t,i=[];const r=this,c=e.options,o=!e.query&&c.sort_empty?c.sort_empty:c.sort;if(typeof o=="function")return o.bind(this);const h=function(O,v){return O==="$score"?v.score:e.getAttrFn(r.items[v.id],O)};if(o)for(let u of o)(e.query||u.field!=="$score")&&i.push(u);if(e.query){t=!0;for(let u of i)if(u.field==="$score"){t=!1;break}t&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(u=>u.field!=="$score");return i.length?function(u,O){var v,S;for(let A of i)if(S=A.field,v=(A.direction==="desc"?-1:1)*lt(h(S,u),h(S,O)),v)return v;return 0}:null}prepareSearch(e,t){const i={};var r=Object.assign({},t);if(ie(r,"sort"),ie(r,"sort_empty"),r.fields){ie(r,"fields");const c=[];r.fields.forEach(o=>{typeof o=="string"&&(o={field:o,weight:1}),c.push(o),i[o.field]="weight"in o?o.weight:1}),r.fields=c}return{options:r,query:e.toLowerCase().trim(),tokens:this.tokenize(e,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?rt:nt}}search(e,t){var i=this,r,c;c=this.prepareSearch(e,t),t=c.options,e=c.query;const o=t.score||i._getScoreFunction(c);e.length?P(i.items,(p,u)=>{r=o(p),(t.filter===!1||r>0)&&c.items.push({score:r,id:u})}):P(i.items,(p,u)=>{c.items.push({score:1,id:u})});const h=i._getSortFunction(c);return h&&c.items.sort(h),c.total=c.items.length,typeof t.limit=="number"&&(c.items=c.items.slice(0,t.limit)),c}}const j=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},I=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ae(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},Ae=n=>typeof n=="string"&&n.indexOf("<")>-1,at=n=>n.replace(/['"\\]/g,"\\$&"),ne=(n,e)=>{var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),n.dispatchEvent(t)},K=(n,e)=>{Object.assign(n.style,e)},F=(n,...e)=>{var t=Ee(e);n=ke(n),n.map(i=>{t.map(r=>{i.classList.add(r)})})},B=(n,...e)=>{var t=Ee(e);n=ke(n),n.map(i=>{t.map(r=>{i.classList.remove(r)})})},Ee=n=>{var e=[];return j(n,t=>{typeof t=="string"&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},ke=n=>(Array.isArray(n)||(n=[n]),n),G=(n,e,t)=>{if(!(t&&!t.contains(n)))for(;n&&n.matches;){if(n.matches(e))return n;n=n.parentNode}},fe=(n,e=0)=>e>0?n[n.length-1]:n[0],ct=n=>Object.keys(n).length===0,Z=(n,e)=>{if(!n)return-1;e=e||n.nodeName;for(var t=0;n=n.previousElementSibling;)n.matches(e)&&t++;return t},T=(n,e)=>{j(e,(t,i)=>{t==null?n.removeAttribute(i):n.setAttribute(i,""+t)})},le=(n,e)=>{n.parentNode&&n.parentNode.replaceChild(e,n)},dt=(n,e)=>{if(e===null)return;if(typeof e=="string"){if(!e.length)return;e=new RegExp(e,"i")}const t=c=>{var o=c.data.match(e);if(o&&c.data.length>0){var h=document.createElement("span");h.className="highlight";var p=c.splitText(o.index);p.splitText(o[0].length);var u=p.cloneNode(!0);return h.appendChild(u),le(p,h),1}return 0},i=c=>{c.nodeType===1&&c.childNodes&&!/(script|style)/i.test(c.tagName)&&(c.className!=="highlight"||c.tagName!=="SPAN")&&Array.from(c.childNodes).forEach(o=>{r(o)})},r=c=>c.nodeType===3?t(c):(i(c),0);r(n)},ht=n=>{var e=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(t){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()})},ut=65,pt=13,Te=27,oe=37,ft=38,Ie=39,gt=40,ge=8,mt=46,ae=9,vt=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),U=vt?"metaKey":"ctrlKey";var me={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};const M=n=>typeof n>"u"||n===null?null:Y(n),Y=n=>typeof n=="boolean"?n?"1":"0":n+"",Q=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),bt=(n,e)=>e>0?setTimeout(n,e):(n.call(null),null),wt=(n,e)=>{var t;return function(i,r){var c=this;t&&(c.loading=Math.max(c.loading-1,0),clearTimeout(t)),t=setTimeout(function(){t=null,c.loadedSearches[i]=!0,n.call(c,i,r)},e)}},ve=(n,e,t)=>{var i,r=n.trigger,c={};n.trigger=function(){var o=arguments[0];if(e.indexOf(o)!==-1)c[o]=arguments;else return r.apply(n,arguments)},t.apply(n,[]),n.trigger=r;for(i of e)i in c&&r.apply(n,c[i])},Ot=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),E=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},k=(n,e,t,i)=>{n.addEventListener(e,t,i)},$=(n,e)=>{if(!e||!e[n])return!1;var t=(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0);return t===1},re=(n,e)=>{const t=n.getAttribute("id");return t||(n.setAttribute("id",e),e)},be=n=>n.replace(/[\\"']/g,"\\$&"),q=(n,e)=>{e&&n.append(e)};function we(n,e){var t=Object.assign({},me,e),i=t.dataAttr,r=t.labelField,c=t.valueField,o=t.disabledField,h=t.optgroupField,p=t.optgroupLabelField,u=t.optgroupValueField,O=n.tagName.toLowerCase(),v=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!v&&!t.allowEmptyOption){let C=n.querySelector('option[value=""]');C&&(v=C.textContent)}var S={placeholder:v,options:[],optgroups:[],items:[],maxItems:null},A=()=>{var C,s=S.options,l={},a=1;let d=0;var f=m=>{var y=Object.assign({},m.dataset),b=i&&y[i];return typeof b=="string"&&b.length&&(y=Object.assign(y,JSON.parse(b))),y},w=(m,y)=>{var b=M(m.value);if(b!=null&&!(!b&&!t.allowEmptyOption)){if(l.hasOwnProperty(b)){if(y){var x=l[b][h];x?Array.isArray(x)?x.push(y):l[b][h]=[x,y]:l[b][h]=y}}else{var L=f(m);L[r]=L[r]||m.textContent,L[c]=L[c]||b,L[o]=L[o]||m.disabled,L[h]=L[h]||y,L.$option=m,L.$order=L.$order||++d,l[b]=L,s.push(L)}m.selected&&S.items.push(b)}},g=m=>{var y,b;b=f(m),b[p]=b[p]||m.getAttribute("label")||"",b[u]=b[u]||a++,b[o]=b[o]||m.disabled,b.$order=b.$order||++d,S.optgroups.push(b),y=b[u],j(m.children,x=>{w(x,y)})};S.maxItems=n.hasAttribute("multiple")?null:1,j(n.children,m=>{C=m.tagName.toLowerCase(),C==="optgroup"?g(m):C==="option"&&w(m)})},_=()=>{const C=n.getAttribute(i);if(C)S.options=JSON.parse(C),j(S.options,l=>{S.items.push(l[c])});else{var s=n.value.trim()||"";if(!t.allowEmptyOption&&!s.length)return;const l=s.split(t.delimiter);j(l,a=>{const d={};d[r]=a,d[c]=a,S.options.push(d)}),S.items=l}};return O==="select"?A():_(),Object.assign({},me,S,e)}var Oe=0;class N extends $e(Re){constructor(e,t){super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,Oe++;var i,r=I(e);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var c=window.getComputedStyle&&window.getComputedStyle(r,null);i=c.getPropertyValue("direction");const o=we(r,t);this.settings=o,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=re(r,"tomselect-"+Oe),this.isRequired=r.required,this.sifter=new ot(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(o.maxItems===1?"single":"multi"),typeof o.hideSelected!="boolean"&&(o.hideSelected=o.mode==="multi"),typeof o.hidePlaceholder!="boolean"&&(o.hidePlaceholder=o.mode!=="multi");var h=o.createFilter;typeof h!="function"&&(typeof h=="string"&&(h=new RegExp(h)),h instanceof RegExp?o.createFilter=s=>h.test(s):o.createFilter=s=>this.settings.duplicates||!this.options[s]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const p=I("<div>"),u=I("<div>"),O=this._render("dropdown"),v=I('<div role="listbox" tabindex="-1">'),S=this.input.getAttribute("class")||"",A=o.mode;var _;if(F(p,o.wrapperClass,S,A),F(u,o.controlClass),q(p,u),F(O,o.dropdownClass,A),o.copyClassesToDropdown&&F(O,S),F(v,o.dropdownContentClass),q(O,v),I(o.dropdownParent||p).appendChild(O),Ae(o.controlInput)){_=I(o.controlInput);var C=["autocorrect","autocapitalize","autocomplete","spellcheck"];P(C,s=>{r.getAttribute(s)&&T(_,{[s]:r.getAttribute(s)})}),_.tabIndex=-1,u.appendChild(_),this.focus_node=_}else o.controlInput?(_=I(o.controlInput),this.focus_node=_):(_=I("<input/>"),this.focus_node=u);this.wrapper=p,this.dropdown=O,this.dropdown_content=v,this.control=u,this.control_input=_,this.setup()}setup(){const e=this,t=e.settings,i=e.control_input,r=e.dropdown,c=e.dropdown_content,o=e.wrapper,h=e.control,p=e.input,u=e.focus_node,O={passive:!0},v=e.inputId+"-ts-dropdown";T(c,{id:v}),T(u,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":v});const S=re(u,e.inputId+"-ts-control"),A="label[for='"+at(e.inputId)+"']",_=document.querySelector(A),C=e.focus.bind(e);if(_){k(_,"click",C),T(_,{for:S});const a=re(_,e.inputId+"-ts-label");T(u,{"aria-labelledby":a}),T(c,{"aria-labelledby":a})}if(o.style.width=p.style.width,e.plugins.names.length){const a="plugin-"+e.plugins.names.join(" plugin-");F([o,r],a)}(t.maxItems===null||t.maxItems>1)&&e.is_select_tag&&T(p,{multiple:"multiple"}),t.placeholder&&T(i,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+z(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=wt(t.load,t.loadThrottle)),k(r,"mousemove",()=>{e.ignoreHover=!1}),k(r,"mouseenter",a=>{var d=G(a.target,"[data-selectable]",r);d&&e.onOptionHover(a,d)},{capture:!0}),k(r,"click",a=>{const d=G(a.target,"[data-selectable]");d&&(e.onOptionSelect(a,d),E(a,!0))}),k(h,"click",a=>{var d=G(a.target,"[data-ts-item]",h);if(d&&e.onItemSelect(a,d)){E(a,!0);return}i.value==""&&(e.onClick(),E(a,!0))}),k(u,"keydown",a=>e.onKeyDown(a)),k(i,"keypress",a=>e.onKeyPress(a)),k(i,"input",a=>e.onInput(a)),k(u,"blur",a=>e.onBlur(a)),k(u,"focus",a=>e.onFocus(a)),k(i,"paste",a=>e.onPaste(a));const s=a=>{const d=a.composedPath()[0];if(!o.contains(d)&&!r.contains(d)){e.isFocused&&e.blur(),e.inputState();return}d==i&&e.isOpen?a.stopPropagation():E(a,!0)},l=()=>{e.isOpen&&e.positionDropdown()};k(document,"mousedown",s),k(window,"scroll",l,O),k(window,"resize",l,O),this._destroy=()=>{document.removeEventListener("mousedown",s),window.removeEventListener("scroll",l),window.removeEventListener("resize",l),_&&_.removeEventListener("click",C)},this.revertSettings={innerHTML:p.innerHTML,tabIndex:p.tabIndex},p.tabIndex=-1,p.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,k(p,"invalid",()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())}),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,p.disabled?e.disable():p.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),F(p,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),t.preload===!0&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),P(t,i=>{this.registerOptionGroup(i)})}setupTemplates(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,r={optgroup:c=>{let o=document.createElement("div");return o.className="optgroup",o.appendChild(c.options),o},optgroup_header:(c,o)=>'<div class="optgroup-header">'+o(c[i])+"</div>",option:(c,o)=>"<div>"+o(c[t])+"</div>",item:(c,o)=>"<div>"+o(c[t])+"</div>",option_create:(c,o)=>'<div class="create">Add <strong>'+o(c.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},r,e.settings.render)}setupCallbacks(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)t=this.settings[i[e]],t&&this.on(e,t)}sync(e=!0){const t=this,i=e?we(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(i.options,i.optgroups),t.setValue(i.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0){e.clearActiveItems(),e.focus();return}e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){ne(this.input,"input"),ne(this.input,"change")}onPaste(e){var t=this;if(t.isInputHidden||t.isLocked){E(e);return}t.settings.splitOn&&setTimeout(()=>{var i=t.inputValue();if(i.match(t.settings.splitOn)){var r=i.trim().split(t.settings.splitOn);P(r,c=>{M(c)&&(this.options[c]?t.addItem(c):t.createItem(c))})}},0)}onKeyPress(e){var t=this;if(t.isLocked){E(e);return}var i=String.fromCharCode(e.keyCode||e.which);if(t.settings.create&&t.settings.mode==="multi"&&i===t.settings.delimiter){t.createItem(),E(e);return}}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked){e.keyCode!==ae&&E(e);return}switch(e.keyCode){case ut:if($(U,e)&&t.control_input.value==""){E(e),t.selectAll();return}break;case Te:t.isOpen&&(E(e,!0),t.close()),t.clearActiveItems();return;case gt:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let i=t.getAdjacent(t.activeOption,1);i&&t.setActiveOption(i)}E(e);return;case ft:if(t.activeOption){let i=t.getAdjacent(t.activeOption,-1);i&&t.setActiveOption(i)}E(e);return;case pt:t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),E(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&E(e);return;case oe:t.advanceSelection(-1,e);return;case Ie:t.advanceSelection(1,e);return;case ae:t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),E(e)),t.settings.create&&t.createItem()&&E(e));return;case ge:case mt:t.deleteSelection(e);return}t.isInputHidden&&!$(U,e)&&E(e)}onInput(e){if(this.isLocked)return;const t=this.inputValue();if(this.lastValue!==t){if(this.lastValue=t,t==""){this._onInput();return}this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=bt(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,i=t.isFocused;if(t.isDisabled||t.isReadOnly){t.blur(),E(e);return}t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.preload(),i||t.trigger("focus"),t.activeItems.length||(t.inputState(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(document.hasFocus()!==!1){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var i=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,i):i()}}}onOptionSelect(e,t){var i,r=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=t.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&e.type&&/click/.test(e.type)&&r.setActiveOption(t))))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(E(e),i.setActiveItem(t,e),!0):!1}canLoad(e){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(e))}load(e){const t=this;if(!t.canLoad(e))return;F(t.wrapper,t.settings.loadingClass),t.loading++;const i=t.loadCallback.bind(t);t.settings.load.call(t,e,i)}loadCallback(e,t){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(e,t),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||B(i.wrapper,i.settings.loadingClass),i.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input,i=t.value!==e;i&&(t.value=e,ne(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){var i=t?[]:["change"];ve(this,i,()=>{this.clear(t),this.addItems(e,t)})}setMaxItems(e){e===0&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var i=this,r,c,o,h,p,u;if(i.settings.mode!=="single"){if(!e){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=t&&t.type.toLowerCase(),r==="click"&&$("shiftKey",t)&&i.activeItems.length){for(u=i.getLastActive(),o=Array.prototype.indexOf.call(i.control.children,u),h=Array.prototype.indexOf.call(i.control.children,e),o>h&&(p=o,o=h,h=p),c=o;c<=h;c++)e=i.control.children[c],i.activeItems.indexOf(e)===-1&&i.setActiveItemClass(e);E(t)}else r==="click"&&$(U,t)||r==="keydown"&&$("shiftKey",t)?e.classList.contains("active")?i.removeActiveItem(e):i.setActiveItemClass(e):(i.clearActiveItems(),i.setActiveItemClass(e));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(e){const t=this,i=t.control.querySelector(".last-active");i&&B(i,"last-active"),F(e,"active last-active"),t.trigger("item_select",e),t.activeItems.indexOf(e)==-1&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),B(e,"active")}clearActiveItems(){B(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,T(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),T(e,{"aria-selected":"true"}),F(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;const i=this.dropdown_content,r=i.clientHeight,c=i.scrollTop||0,o=e.offsetHeight,h=e.getBoundingClientRect().top-i.getBoundingClientRect().top+c;h+o>r+c?this.scroll(h-r+o,t):h<c&&this.scroll(h,t)}scroll(e,t){const i=this.dropdown_content;t&&(i.style.scrollBehavior=t),i.scrollTop=e,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(B(this.activeOption,"active"),T(this.activeOption,{"aria-selected":null})),this.activeOption=null,T(this.focus_node,{"aria-activedescendant":null})}selectAll(){const e=this;if(e.settings.mode==="single")return;const t=e.controlChildren();t.length&&(e.inputState(),e.close(),e.activeItems=t,P(t,i=>{e.setActiveItemClass(i)}))}inputState(){var e=this;e.control.contains(e.control_input)&&(T(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&T(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout(()=>{e.ignoreFocus=!1,e.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return typeof e.sortField=="string"&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,i,r=this,c=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,e),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==r.lastQuery?(r.lastQuery=e,t=r.sifter.search(e,Object.assign(c,{score:i})),r.currentResults=t):t=Object.assign({},r.currentResults),r.settings.hideSelected&&(t.items=t.items.filter(o=>{let h=M(o.id);return!(h&&r.items.indexOf(h)!==-1)})),t}refreshOptions(e=!0){var t,i,r,c,o,h,p,u,O,v;const S={},A=[];var _=this,C=_.inputValue();const s=C===_.lastQuery||C==""&&_.lastQuery==null;var l=_.search(C),a=null,d=_.settings.shouldOpen||!1,f=_.dropdown_content;s&&(a=_.activeOption,a&&(O=a.closest("[data-group]"))),c=l.items.length,typeof _.settings.maxOptions=="number"&&(c=Math.min(c,_.settings.maxOptions)),c>0&&(d=!0);const w=(m,y)=>{let b=S[m];if(b!==void 0){let L=A[b];if(L!==void 0)return[b,L.fragment]}let x=document.createDocumentFragment();return b=A.length,A.push({fragment:x,order:y,optgroup:m}),[b,x]};for(t=0;t<c;t++){let m=l.items[t];if(!m)continue;let y=m.id,b=_.options[y];if(b===void 0)continue;let x=Y(y),L=_.getOption(x,!0);for(_.settings.hideSelected||L.classList.toggle("selected",_.items.includes(x)),o=b[_.settings.optgroupField]||"",h=Array.isArray(o)?o:[o],i=0,r=h&&h.length;i<r;i++){o=h[i];let D=b.$order,V=_.optgroups[o];V===void 0?o="":D=V.$order;const[R,H]=w(o,D);i>0&&(L=L.cloneNode(!0),T(L,{id:b.$id+"-clone-"+i,"aria-selected":null}),L.classList.add("ts-cloned"),B(L,"active"),_.activeOption&&_.activeOption.dataset.value==y&&O&&O.dataset.group===o.toString()&&(a=L)),H.appendChild(L),o!=""&&(S[o]=R)}}_.settings.lockOptgroupOrder&&A.sort((m,y)=>m.order-y.order),p=document.createDocumentFragment(),P(A,m=>{let y=m.fragment,b=m.optgroup;if(!y||!y.children.length)return;let x=_.optgroups[b];if(x!==void 0){let L=document.createDocumentFragment(),D=_.render("optgroup_header",x);q(L,D),q(L,y);let V=_.render("optgroup",{group:x,options:L});q(p,V)}else q(p,y)}),f.innerHTML="",q(f,p),_.settings.highlight&&(ht(f),l.query.length&&l.tokens.length&&P(l.tokens,m=>{dt(f,m.regex)}));var g=m=>{let y=_.render(m,{input:C});return y&&(d=!0,f.insertBefore(y,f.firstChild)),y};if(_.loading?g("loading"):_.settings.shouldLoad.call(_,C)?l.items.length===0&&g("no_results"):g("not_loading"),u=_.canCreate(C),u&&(v=g("option_create")),_.hasOptions=l.items.length>0||u,d){if(l.items.length>0){if(!a&&_.settings.mode==="single"&&_.items[0]!=null&&(a=_.getOption(_.items[0])),!f.contains(a)){let m=0;v&&!_.settings.addPrecedence&&(m=1),a=_.selectable()[m]}}else v&&(a=v);e&&!_.isOpen&&(_.open(),_.scrollToOption(a,"auto")),_.setActiveOption(a)}else _.clearActiveOption(),e&&_.isOpen&&_.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){const i=this;if(Array.isArray(e))return i.addOptions(e,t),!1;const r=M(e[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(e.$order=e.$order||++i.order,e.$id=i.inputId+"-opt-"+e.$order,i.options[r]=e,i.lastQuery=null,t&&(i.userOptions[r]=t,i.trigger("option_add",r,e)),r)}addOptions(e,t=!1){P(e,i=>{this.addOption(i,t)})}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=M(e[this.settings.optgroupValueField]);return t===null?!1:(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var i;t[this.settings.optgroupValueField]=e,(i=this.registerOptionGroup(t))&&this.trigger("optgroup_add",i,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){const i=this;var r,c;const o=M(e),h=M(t[i.settings.valueField]);if(o===null)return;const p=i.options[o];if(p==null)return;if(typeof h!="string")throw new Error("Value must be set in option data");const u=i.getOption(o),O=i.getItem(o);if(t.$order=t.$order||p.$order,delete i.options[o],i.uncacheValue(h),i.options[h]=t,u){if(i.dropdown_content.contains(u)){const v=i._render("option",t);le(u,v),i.activeOption===u&&i.setActiveOption(v)}u.remove()}O&&(c=i.items.indexOf(o),c!==-1&&i.items.splice(c,1,h),r=i._render("item",t),O.classList.contains("active")&&F(r,"active"),le(O,r)),i.lastQuery=null}removeOption(e,t){const i=this;e=Y(e),i.uncacheValue(e),delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)}clearOptions(e){const t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};P(this.options,(r,c)=>{t(r,c)&&(i[c]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){const i=M(e);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(t)return this._render("option",r)}return null}getAdjacent(e,t,i="option"){var r=this,c;if(!e)return null;i=="item"?c=r.controlChildren():c=r.dropdown_content.querySelectorAll("[data-selectable]");for(let o=0;o<c.length;o++)if(c[o]==e)return t>0?c[o+1]:c[o-1];return null}getItem(e){if(typeof e=="object")return e;var t=M(e);return t!==null?this.control.querySelector(`[data-value="${be(t)}"]`):null}addItems(e,t){var i=this,r=Array.isArray(e)?e:[e];r=r.filter(o=>i.items.indexOf(o)===-1);const c=r[r.length-1];r.forEach(o=>{i.isPending=o!==c,i.addItem(o,t)})}addItem(e,t){var i=t?[]:["change","dropdown_close"];ve(this,i,()=>{var r,c;const o=this,h=o.settings.mode,p=M(e);if(!(p&&o.items.indexOf(p)!==-1&&(h==="single"&&o.close(),h==="single"||!o.settings.duplicates))&&!(p===null||!o.options.hasOwnProperty(p))&&(h==="single"&&o.clear(t),!(h==="multi"&&o.isFull()))){if(r=o._render("item",o.options[p]),o.control.contains(r)&&(r=r.cloneNode(!0)),c=o.isFull(),o.items.splice(o.caretPos,0,p),o.insertAtCaret(r),o.isSetup){if(!o.isPending&&o.settings.hideSelected){let u=o.getOption(p),O=o.getAdjacent(u,1);O&&o.setActiveOption(O)}!o.isPending&&!o.settings.closeAfterSelect&&o.refreshOptions(o.isFocused&&h!=="single"),o.settings.closeAfterSelect!=!1&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",p,r),o.isPending||o.updateOriginalInput({silent:t})}(!o.isPending||!c&&o.isFull())&&(o.inputState(),o.refreshState())}})}removeItem(e=null,t){const i=this;if(e=i.getItem(e),!e)return;var r,c;const o=e.dataset.value;r=Z(e),e.remove(),e.classList.contains("active")&&(c=i.activeItems.indexOf(e),i.activeItems.splice(c,1),B(e,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(o)&&i.removeOption(o,t),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:t}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",o,e)}createItem(e=null,t=()=>{}){arguments.length===3&&(t=arguments[2]),typeof t!="function"&&(t=()=>{});var i=this,r=i.caretPos,c;if(e=e||i.inputValue(),!i.canCreate(e))return t(),!1;i.lock();var o=!1,h=p=>{if(i.unlock(),!p||typeof p!="object")return t();var u=M(p[i.settings.valueField]);if(typeof u!="string")return t();i.setTextboxValue(),i.addOption(p,!0),i.setCaret(r),i.addItem(u),t(p),o=!0};return typeof i.settings.create=="function"?c=i.settings.create.call(this,e,h):c={[i.settings.labelField]:e,[i.settings.valueField]:e},o||h(c),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){const e=this;e.refreshValidityState();const t=e.isFull(),i=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);const r=e.wrapper.classList;r.toggle("focus",e.isFocused),r.toggle("disabled",e.isDisabled),r.toggle("readonly",e.isReadOnly),r.toggle("required",e.isRequired),r.toggle("invalid",!e.isValid),r.toggle("locked",i),r.toggle("full",t),r.toggle("input-active",e.isFocused&&!e.isInputHidden),r.toggle("dropdown-active",e.isOpen),r.toggle("has-options",ct(e.options)),r.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){const t=this;var i,r;const c=t.input.querySelector('option[value=""]');if(t.is_select_tag){let p=function(u,O,v){return u||(u=I('<option value="'+Q(O)+'">'+Q(v)+"</option>")),u!=c&&t.input.append(u),o.push(u),(u!=c||h>0)&&(u.selected=!0),u};const o=[],h=t.input.querySelectorAll("option:checked").length;t.input.querySelectorAll("option:checked").forEach(u=>{u.selected=!1}),t.items.length==0&&t.settings.mode=="single"?p(c,"",""):t.items.forEach(u=>{if(i=t.options[u],r=i[t.settings.labelField]||"",o.includes(i.$option)){const O=t.input.querySelector(`option[value="${be(u)}"]:not(:checked)`);p(O,u,r)}else i.$option=p(i.$option,u,r)})}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.isOpen=!0,T(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),K(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),K(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,i=t.isOpen;e&&(t.setTextboxValue(),t.settings.mode==="single"&&t.items.length&&t.inputState()),t.isOpen=!1,T(t.focus_node,{"aria-expanded":"false"}),K(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),i&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var e=this.control,t=e.getBoundingClientRect(),i=e.offsetHeight+t.top+window.scrollY,r=t.left+window.scrollX;K(this.dropdown,{width:t.width+"px",top:i+"px",left:r+"px"})}}clear(e){var t=this;if(t.items.length){var i=t.controlChildren();P(i,r=>{t.removeItem(r,!0)}),t.inputState(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){const t=this,i=t.caretPos,r=t.control;r.insertBefore(e,r.children[i]||null),t.setCaret(i+1)}deleteSelection(e){var t,i,r,c,o=this;t=e&&e.keyCode===ge?-1:1,i=Ot(o.control_input);const h=[];if(o.activeItems.length)c=fe(o.activeItems,t),r=Z(c),t>0&&r++,P(o.activeItems,p=>h.push(p));else if((o.isFocused||o.settings.mode==="single")&&o.items.length){const p=o.controlChildren();let u;t<0&&i.start===0&&i.length===0?u=p[o.caretPos-1]:t>0&&i.start===o.inputValue().length&&(u=p[o.caretPos]),u!==void 0&&h.push(u)}if(!o.shouldDelete(h,e))return!1;for(E(e,!0),typeof r<"u"&&o.setCaret(r);h.length;)o.removeItem(h.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(e,t){const i=e.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,t)===!1)}advanceSelection(e,t){var i,r,c=this;c.rtl&&(e*=-1),!c.inputValue().length&&($(U,t)||$("shiftKey",t)?(i=c.getLastActive(e),i?i.classList.contains("active")?r=c.getAdjacent(i,e,"item"):r=i:e>0?r=c.control_input.nextElementSibling:r=c.control_input.previousElementSibling,r&&(r.classList.contains("active")&&c.removeActiveItem(i),c.setActiveItemClass(r))):c.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var i=this.control.querySelectorAll(".active");if(i)return fe(i,e)}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(e=this.isReadOnly||this.isDisabled){this.isLocked=e,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}setReadOnly(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,B(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){var i,r;const c=this;if(typeof this.settings.render[e]!="function"||(r=c.settings.render[e].call(this,t,Q),!r))return null;if(r=I(r),e==="option"||e==="option_create"?t[c.settings.disabledField]?T(r,{"aria-disabled":"true"}):T(r,{"data-selectable":""}):e==="optgroup"&&(i=t.group[c.settings.optgroupValueField],T(r,{"data-group":i}),t.group[c.settings.disabledField]&&T(r,{"data-disabled":""})),e==="option"||e==="item"){const o=Y(t[c.settings.valueField]);T(r,{"data-value":o}),e==="item"?(F(r,c.settings.itemClass),T(r,{"data-ts-item":""})):(F(r,c.settings.optionClass),T(r,{role:"option",id:t.$id}),t.$div=r,c.options[o]=t)}return r}_render(e,t){const i=this.render(e,t);if(i==null)throw"HTMLElement expected";return i}clearCache(){P(this.options,e=>{e.$div&&(e.$div.remove(),delete e.$div)})}uncacheValue(e){const t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,i){var r=this,c=r[t];r[t]=function(){var o,h;return e==="after"&&(o=c.apply(r,arguments)),h=i.apply(r,arguments),e==="instead"?h:(e==="before"&&(o=c.apply(r,arguments)),o)}}}function yt(){k(this.input,"change",()=>{this.sync()})}function _t(n){var e=this,t=e.onOptionSelect;e.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(h,p){p?(h.checked=!0,i.uncheckedClassNames&&h.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&h.classList.add(...i.checkedClassNames)):(h.checked=!1,i.checkedClassNames&&h.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&h.classList.add(...i.uncheckedClassNames))},c=function(h){setTimeout(()=>{var p=h.querySelector("input."+i.className);p instanceof HTMLInputElement&&r(p,h.classList.contains("selected"))},1)};e.hook("after","setupTemplates",()=>{var o=e.settings.render.option;e.settings.render.option=(h,p)=>{var u=I(o.call(e,h,p)),O=document.createElement("input");i.className&&O.classList.add(i.className),O.addEventListener("click",function(S){E(S)}),O.type="checkbox";const v=M(h[e.settings.valueField]);return r(O,!!(v&&e.items.indexOf(v)>-1)),u.prepend(O),u}}),e.on("item_remove",o=>{var h=e.getOption(o);h&&(h.classList.remove("selected"),c(h))}),e.on("item_add",o=>{var h=e.getOption(o);h&&c(h)}),e.hook("instead","onOptionSelect",(o,h)=>{if(h.classList.contains("selected")){h.classList.remove("selected"),e.removeItem(h.dataset.value),e.refreshOptions(),E(o,!0);return}t.call(e,o,h),c(h)})}function St(n){const e=this,t=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);e.on("initialize",()=>{var i=I(t.html(t));i.addEventListener("click",r=>{e.isLocked||(e.clear(),e.settings.mode==="single"&&e.settings.allowEmptyOption&&e.addItem(""),r.preventDefault(),r.stopPropagation())}),e.control.appendChild(i)})}const Ct=(n,e)=>{var t;(t=n.parentNode)==null||t.insertBefore(e,n.nextSibling)},Lt=(n,e)=>{var t;(t=n.parentNode)==null||t.insertBefore(e,n)},xt=(n,e)=>{do{var t;if(e=(t=e)==null?void 0:t.previousElementSibling,n==e)return!0}while(e&&e.previousElementSibling);return!1};function At(){var n=this;if(n.settings.mode!=="multi")return;var e=n.lock,t=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var c=n.settings.render.item;n.settings.render.item=(o,h)=>{const p=I(c.call(n,o,h));T(p,{draggable:"true"});const u=C=>{i||E(C),C.stopPropagation()},O=C=>{r=p,setTimeout(()=>{p.classList.add("ts-dragging")},0)},v=C=>{C.preventDefault(),p.classList.add("ts-drag-over"),A(p,r)},S=()=>{p.classList.remove("ts-drag-over")},A=(C,s)=>{s!==void 0&&(xt(s,p)?Ct(C,s):Lt(C,s))},_=()=>{var C;document.querySelectorAll(".ts-drag-over").forEach(l=>l.classList.remove("ts-drag-over")),(C=r)==null||C.classList.remove("ts-dragging"),r=void 0;var s=[];n.control.querySelectorAll("[data-value]").forEach(l=>{if(l.dataset.value){let a=l.dataset.value;a&&s.push(a)}}),n.setValue(s)};return k(p,"mousedown",u),k(p,"dragstart",O),k(p,"dragenter",v),k(p,"dragover",v),k(p,"dragleave",S),k(p,"dragend",_),p}}),n.hook("instead","lock",()=>(i=!1,e.call(n))),n.hook("instead","unlock",()=>(i=!0,t.call(n)))}function Et(n){const e=this,t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);e.on("initialize",()=>{var i=I(t.html(t)),r=i.querySelector("."+t.closeClass);r&&r.addEventListener("click",c=>{E(c,!0),e.close()}),e.dropdown.insertBefore(i,e.dropdown.firstChild)})}function kt(){var n=this;n.hook("instead","setCaret",e=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?e=n.items.length:(e=Math.max(0,Math.min(n.items.length,e)),e!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((t,i)=>{i<e?n.control_input.insertAdjacentElement("beforebegin",t):n.control.appendChild(t)})),n.caretPos=e}),n.hook("instead","moveCaret",e=>{if(!n.isFocused)return;const t=n.getLastActive(e);if(t){const i=Z(t);n.setCaret(e>0?i+1:i),n.setActiveItem(),B(t,"last-active")}else n.setCaret(n.caretPos+e)})}function Tt(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,F(n.control_input,"dropdown-input");const e=I('<div class="dropdown-input-wrap">');e.append(n.control_input),n.dropdown.insertBefore(e,n.dropdown.firstChild);const t=I('<input class="items-placeholder" tabindex="-1" />');t.placeholder=n.settings.placeholder||"",n.control.append(t)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",t=>{switch(t.keyCode){case Te:n.isOpen&&(E(t,!0),n.close()),n.clearActiveItems();return;case ae:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,t)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const e=n.onBlur;n.hook("instead","onBlur",t=>{if(!(t&&t.relatedTarget==n.control_input))return e.call(n)}),k(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}function It(){var n=this;n.on("initialize",()=>{var e=document.createElement("span"),t=n.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(e);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const c of i)e.style[c]=t.style[c];var r=()=>{e.textContent=t.value,t.style.width=e.clientWidth+"px"};r(),n.on("update item_add item_remove",r),k(t,"input",r),k(t,"keyup",r),k(t,"blur",r),k(t,"update",r)})}function Dt(){var n=this,e=n.deleteSelection;this.hook("instead","deleteSelection",t=>n.activeItems.length?e.call(n,t):!1)}function Ft(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}function Pt(){var n=this,e=n.onKeyDown;n.hook("instead","onKeyDown",t=>{var i,r,c,o;if(!n.isOpen||!(t.keyCode===oe||t.keyCode===Ie))return e.call(n,t);n.ignoreHover=!0,o=G(n.activeOption,"[data-group]"),i=Z(n.activeOption,"[data-selectable]"),o&&(t.keyCode===oe?o=o.previousSibling:o=o.nextSibling,o&&(c=o.querySelectorAll("[data-selectable]"),r=c[Math.min(c.length-1,i)],r&&n.setActiveOption(r)))})}function Nt(n){const e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var t=this;if(e.append){var i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+Q(e.title)+'">'+e.label+"</a>";t.hook("after","setupTemplates",()=>{var r=t.settings.render.item;t.settings.render.item=(c,o)=>{var h=I(r.call(t,c,o)),p=I(i);return h.appendChild(p),k(p,"mousedown",u=>{E(u,!0)}),k(p,"click",u=>{t.isLocked||(E(u,!0),!t.isLocked&&t.shouldDelete([h],u)&&(t.removeItem(h),t.refreshOptions(!1),t.inputState()))}),h}})}}function Mt(n){const e=this,t=Object.assign({text:i=>i[e.settings.labelField]},n);e.on("item_remove",function(i){if(e.isFocused&&e.control_input.value.trim()===""){var r=e.options[i];r&&e.setTextboxValue(t.text.call(e,r))}})}function Vt(){const n=this,e=n.canLoad,t=n.clearActiveOption,i=n.loadCallback;var r={},c,o=!1,h,p=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(c.clientHeight/(c.scrollHeight-c.scrollTop)>.9)return!0;if(n.activeOption){var S=n.selectable(),A=Array.from(S).indexOf(n.activeOption);if(A>=S.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const u=v=>typeof n.settings.maxOptions=="number"&&c.children.length>=n.settings.maxOptions?!1:!!(v in r&&r[v]),O=(v,S)=>n.items.indexOf(S)>=0||p.indexOf(S)>=0;n.setNextUrl=(v,S)=>{r[v]=S},n.getUrl=v=>{if(v in r){const S=r[v];return r[v]=!1,S}return n.clearPagination(),n.settings.firstUrl.call(n,v)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!o)return t.call(n)}),n.hook("instead","canLoad",v=>v in r?u(v):e.call(n,v)),n.hook("instead","loadCallback",(v,S)=>{if(!o)n.clearOptions(O);else if(h){const A=v[0];A!==void 0&&(h.dataset.value=A[n.settings.valueField])}i.call(n,v,S),o=!1}),n.hook("after","refreshOptions",()=>{const v=n.lastValue;var S;u(v)?(S=n.render("loading_more",{query:v}),S&&(S.setAttribute("data-selectable",""),h=S)):v in r&&!c.querySelector(".no-results")&&(S=n.render("no_more_results",{query:v})),S&&(F(S,n.settings.optionClass),c.append(S))}),n.on("initialize",()=>{p=Object.keys(n.options),c=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),c.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(o||(o=!0,n.load.call(n,n.lastValue)))})})}N.define("change_listener",yt);N.define("checkbox_options",_t);N.define("clear_button",St);N.define("drag_drop",At);N.define("dropdown_header",Et);N.define("caret_position",kt);N.define("dropdown_input",Tt);N.define("input_autogrow",It);N.define("no_backspace_delete",Dt);N.define("no_active_items",Ft);N.define("optgroup_columns",Pt);N.define("remove_button",Nt);N.define("restore_on_backspace",Mt);N.define("virtual_scroll",Vt);const Bt={formStrategy(n){let e=document.createElement("form");e.action=n.url,e.method=n.method,e.style.display="none;";let t=[];n.fields&&n.fields.constructor===Object&&(t=Object.entries(n.fields).map(([i,r])=>{const c=document.createElement("input");return c.type="text",c.name=i,c.value=r,c})),document.body.appendChild(e),t.forEach(i=>e.appendChild(i)),e.submit(),setTimeout(e.remove,1e3)},redirectStrategy(n){window.location.assign(n.redirect_url)}};function De(n){const e={form:"formStrategy",redirect:"redirectStrategy"}[n];if(!e){console.log("NO PAYMENT METHOD STRATEGY FOUND",n);return}return Bt[e]}window.getPaymentStrategy=De;const Ht=()=>({init(){},async addFunds(n,e){const t={amount:this.$refs.amount.value,payment_method_id:n,["g-recaptcha-response"]:this.$refs.captcha.querySelector("textarea#g-recaptcha-response").value},i="/api/v1/user/add-funds";await window.axios.post(i,t).then(r=>{De(e)(r.data.data)}).catch(r=>{grecaptcha.reset(),ye(r)})}});window.SlimSelect=He;window.TomSelect=N;window.handleErrors=ye;window.Alpine=Me;document.addEventListener("alpine:init",()=>{window.Alpine.flatpicker={},window.Alpine.data("flatpickr",Ve),window.Alpine.data("userBalance",Ht)});window.Alpine.start();
